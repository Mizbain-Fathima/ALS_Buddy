# File: RAG/rag_setup.lel.yml
name: rag_setup
type: job
description: |
  Offline job to build/update the Chroma vector store from preprocessed
  ALS documents. Uses an embedding model to create vectors and persists them
  to disk at RAG/chroma_db.
inputs:
  - source_json: path
steps:
  - id: load_docs
    type: loader
    params:
      path: "webscrapped-data/als_articles_expanded.json"
  - id: chunker
    type: text_chunker
    params:
      chunk_size: 500
      overlap: 50
  - id: embedder
    type: embedder
    params:
      model: "sentence-transformers/all-MiniLM-L6-v2"
  - id: chroma_upsert
    type: chroma_upsert
    params:
      persist_directory: "RAG/chroma_db"
      collection_name: "als_chunks"
  - id: done
    type: noop
outputs:
  - status: string
