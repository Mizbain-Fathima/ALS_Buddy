# File: RAG/api_main.lel.yml
name: api_main
type: server
description: |
  FastAPI-like server declaration in LEL. Exposes POST /ask which accepts a
  JSON payload {question, session_id} and returns {answer}.
server:
  host: 0.0.0.0
  port: 8080
routes:
  - path: /ask
    method: POST
    request_schema:
      type: object
      properties:
        question:
          type: string
        session_id:
          type: string
    response_schema:
      type: object
      properties:
        answer:
          type: string
    handler:
      - id: call_workflow
        type: workflow_call
        params:
          workflow: "langgraph_chatbot"
          inputs:
            input: request.question
            session_id: request.session_id
      - id: return
        type: respond
        params:
          body:
            answer: call_workflow.answer
